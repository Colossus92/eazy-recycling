<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appender name="Logtail" class="nl.eazysoftware.eazyrecyclingservice.config.SafeLogtailAppender">
    <appName>Springboot Backend</appName>
    <sourceToken>${BETTERSTACK_SOURCE_TOKEN}</sourceToken>
    <ingestUrl>https://${BETTERSTACK_INGESTING_HOST}</ingestUrl>
    <mdcFields>requestId,requestTime</mdcFields>
    <mdcTypes>string,int</mdcTypes>
  </appender>
  <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %msg%n</pattern>
    </encoder>
  </appender>
  <!-- Debug logging for Spring Security and JWT validation -->
  <logger name="org.springframework.security" level="DEBUG"/>
  <logger name="org.springframework.security.oauth2" level="DEBUG"/>
  <logger name="org.springframework.security.web" level="DEBUG"/>
  <logger name="nl.eazysoftware.eazyrecyclingservice.config.security" level="DEBUG"/>

  <root level="INFO">
    <appender-ref ref="Logtail" />
    <appender-ref ref="Console" />
  </root>
</configuration>
