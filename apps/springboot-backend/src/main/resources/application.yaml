server:
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/plain
    min-response-size: 1024

spring:
  application.name: eazy-recycling-service
  datasource:
    url: # Specify in environment variable SPRING_DATASOURCE_URL
    driver-class-name: org.postgresql.Driver
  jpa:
    open-in-view: true
    properties:
      jakarta.persistence:
        schema-generation.scripts:
          action: none
          create-target: create.sql
          create-source: metadata
          drop-target: drop.sql
          drop-source: metadata
      hibernate:
        hbm2ddl.auto: none
        show_sql: false
        format_sql: true
        schema-generation.scripts.action: create
        schema-generation.scripts.create-target: schema.sql
        jdbc.time_zone: UTC
  ssl:
    bundle:
      jks:
        amice-client:
          keystore:
            location: ${AMICE_CERTIFICATE_PATH:classpath:certificates/test-amice.pfx}
            password: ${AMICE_PASSWORD:}
            type: PKCS12

# CORS Configuration
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:https://*.eazysoftware.nl,https://*.eazyrecycling.nl}

# Frontend URL for OAuth redirects
frontend:
  url: ${FRONTEND_URL:http://localhost:5173}

pricing-app:
  base-url: ${PRICING_APP_BASE_URL:}
  bearer-token: ${PRICING_APP_BEARER_TOKEN:}

springdoc:
  api-docs:
    enabled: false

amice:
  enabled: ${AMICE_ENABLED:true}
  url: ${AMICE_URL:}
  username: ${AMICE_USERNAME:}
  password: ${AMICE_PASSWORD:}

exact:
  oauth:
    client-id: ${EXACT_CLIENT_ID:}
    client-secret: ${EXACT_CLIENT_SECRET:}
    redirect-uri: ${EXACT_REDIRECT_URI:http://localhost:8080/api/admin/exact/callback}
    authorization-endpoint: https://start.exactonline.nl/api/oauth2/auth
    token-endpoint: https://start.exactonline.nl/api/oauth2/token

logging:
  structured:
    format:
      console: logstash
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS}{Europe/Amsterdam} [%thread] %-5level %logger{36} - %msg%n"
  level:
    root: info

jobrunr:
  database:
    tablePrefix: jobrunr.
  dashboard:
    enabled: false
  jobs:
    metrics:
      enabled: true
  background-job-server:
    enabled: true
    worker-count: 1
